<!DOCTYPE html>
<html lang="{{ site.lang | default: "en-US" }}">

<head>
 <meta charset="UTF-8">
 <meta http-equiv="X-UA-Compatible" content="IE=edge">
 <meta name="viewport" content="width=device-width, initial-scale=1">
 <title>sugarlump.love AR</title>

<script async src="https://www.googletagmanager.com/gtag/js?id=0-0000000000"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', '0-0000000000');
</script>
 
 </head>
 <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.js"></script>
  
 <script nomodule="" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
 <script src="{{ "/assets/js/scale.fix.js" | relative_url }}"></script>
  <script src="https://unpkg.com/@webcomponents/webcomponentsjs/webcomponents-loader.js"></script>

  <script src="https://unpkg.com/intersection-observer/intersection-observer.js"></script>

  <script src="https://unpkg.com/resize-observer-polyfill/dist/ResizeObserver.js"></script>
 
 <script>
      function Sync(selector, audioSelector) {
        var modelViewer = document.querySelector(selector);
        var sound = document.querySelector(audioSelector);
        var playRequest = document.querySelector("#overlay");

    sound.addEventListener("timeupdate", () => {
          modelViewer.currentTime = sound.currentTime;
          console.log("modelViewer time: " + modelViewer.currentTime);
        });

    sound.addEventListener("pause", () => {
          modelViewer.pause();
        });

    sound.addEventListener("play", () => {
          modelViewer.play();

    playRequest.classList.add("hide");
        });

    document.addEventListener("visibilitychange", () => {
          if (document.visibilityState !== "visible") {
            sound.pause();
          }
        });
var promise = sound.play();
        if (promise !== undefined) {
          promise
            .then(_ => {
              console.log("Autoplay has worked");
              playRequest.classList.add("hide");
            })
            .catch(error => {
              // Show a "Play" button so that user can start playback.
              console.log("Autoplay has not worked");

    // show the modal dialogue to play this
    playRequest.classList.remove("hide");
            });
        }

    }   
      function playNow() {
        var playRequest = document.querySelector("#overlay");
        playRequest.classList.add("hide");

    var sound = document.querySelector("#sound");
        sound.play();
      }

    function jumpTo(time) {
        var sound = document.querySelector("#sound");
        sound.currentTime = time;
      }

    </script>

<script>
/**
* Function that registers a click on an outbound link in Analytics.
* This function takes a valid URL string as an argument, and uses that URL string
* as the event label. Setting the transport method to 'beacon' lets the hit be sent
* using 'navigator.sendBeacon' in browser that support it.
*/
var getOutboundLink = function(url) {
  gtag('event', 'click', {
    'event_category': 'outbound',
    'event_label': url,
    'transport_type': 'beacon',
    'event_callback': function(){document.location = url;}
  });
}
</script>

<style> 
.container {
 column-count: 1;
 column-width: 500px;
 column-gap: 10px;
}
  .card {
  break-inside: avoid;
  background-color: rgb(255, 255, 153);
  border: 2px solid rgb(255, 255, 153);
  padding: 10px;
  margin: 0 0 1em 0;
}

  .card1 {
  break-inside: avoid;
  background-color: #ffff99;
  border: 2px solid rgb(255, 255, 153);
  padding: 5px;
  margin: 0 0 1em 0;
} 

  .stack-top{
    z-index: 9;
}
.marginauto {
    display: block;
    margin: 10px auto;
    text-align: center;
  }

.centerImage
{
 text-align:center;
 display:block;
}

  .center {
  display: block;
  margin-left: auto;
  margin-right: auto;
  width: 50%;
}   

a {
 color: #59cbe8;
}

</style>
<style>
    model-viewer {
      --progress-bar-color: #59cbe8; /* Change 'red' to your desired color */
    }
  </style>
 
  <style>
  @font-face {
    font-family: 'Chalet LondonNineteenEighty Regular';
    src: url('fonts/Chalet LondonNineteenEighty Regular.otf') format('opentype'); /* lowercase 'opentype' for consistency */
  }

  @font-face {
    font-family: 'DaisyByhapppyal-Regular';
    src: url('fonts/DaisyByhapppyal-Regular.otf') format('opentype'); /* lowercase 'opentype' for consistency */
  }
  
  .custom-text {
    font-family: 'Chalet LondonNineteenEighty Regular', sans-serif;
    color: #FFFFFF; /* White text for contrast */
    position: absolute;
    top: 20px;
    left: 20px;
    font-size: 48px; /* Adjust size as needed */
  }

  .daisy-text {
    font-family: 'DaisyByhapppyal-Regular', sans-serif;
    color: #000099; /* Gold text for contrast */
    font-size: 60 px; /* Adjust size as needed */
  }
</style>
 
<style>
  @media (max-width: auto) {
    .custom-text {
      font-size: 18px; /* Adjust font size for smaller screens */
      top: 10px; /* Adjust positioning */
      left: 10px;
    }
    model-viewer {
      height: 300px; /* Adjust model size for mobile */
    }
  }
</style>
 
<body bgcolor= #ffff99>
 
<body>

  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-0000000"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<div class="container">
    <div class="card">
     <img src="images/erin_video_scenes-32.png" alt="Logo" style="width: 350px; height: auto; display: block; margin: auto;">
     </div>

 <div class="card" style="position: relative; width: 100%; text-align: center;">

    <div style="display: flex; justify-content: center; width: 100%;">
        <model-viewer
            id="reveal"
            src="Models/entire_family_99cm.glb?sound=Sound/sweet_neighbor_of_mine3.mp3"
            shadow-intensity="1"
            ar ar-modes="scene-viewer webxr quick-look"
            ar-scale="fixed" ar-preferred ar-placement="floor"
            camera-controls
            camera-orbit="0deg 90deg 100%"
            loading="lazy" slot="ar-button"
            poster="images/Video Poster_2.png"
            alt="Sugarlump Demo"
            style="width: 100%; height: 200px; position: absolute; top: 0; left: 0; z-index: 1;"
            ios-src="Models/GIRL_converted.usdz"
            interaction-prompt="none">
        </model-viewer>
    </div>

    <div style="position: relative; width: 100%; height: 375px; display: flex; justify-content: center; align-items: center; z-index: 2;">
        <video id="video-overlay"
                style="width: 375px; max-width: 100%; height: 375px; object-fit: cover; margin: auto; display: block;"
                poster="images/Video Poster_2.png"
                playsinline muted>
                <source src="Video/Sugarlump Intro v6f.mp4" type="video/mp4">
        </video>

        <button id="play-pause-button" style="
                position: absolute; z-index: 3; top: 50%; left: 50%; transform: translate(-50%, -50%);
                background-color: rgba(255, 255, 255, 0.8); border: none; border-radius: 50%;
                padding: 10px 15px; font-size: 24px; font-weight: bold; cursor: pointer;">
                ▶
        </button>
    </div>
    </div>

<div style="width: 100%; display: flex;
justify-content: center; margin-top: 30px;">
    <button id="ar-button" style="
        background-color: #ffffff; border-radius: 8px;
        border: 2px solid #59cbe8; z-index: 4;
        height: 60px; min-width: 250px; display: flex;
        align-items: center; justify-content: center; padding: 10px;">
        <img src="images/Heart button.png" style="height: 4em; width: auto; margin-right: 5px;" alt="Custom Icon">
        <span style="font-size: 32px; color: #000099; font-family: 'Chalet LondonNineteenEighty Regular', sans-serif;">
            <strong>push here</strong>
        </span>
    </button>
</div>

<script>
document.addEventListener("DOMContentLoaded", function () {
    const video = document.getElementById('video-overlay');
    const playPauseButton = document.getElementById('play-pause-button');
    const arButton = document.getElementById('ar-button');
    const modelViewer = document.getElementById('reveal');

    // Initially, the video element (with its poster) is visible.
    // The play button should also be visible by default.
    playPauseButton.style.display = 'block';
    playPauseButton.innerHTML = "▶";
    video.muted = true; // Start muted, and let user click to unmute/play

    // Function to toggle video play/pause
    function toggleVideo() {
        if (video.paused || video.ended) {
            video.play();
            video.muted = false; // Enable audio playback after user interaction
            playPauseButton.innerHTML = "❚❚"; // Change to pause icon
            playPauseButton.style.display = "none"; // Hide button once playing
            modelViewer.pause(); // Pause model-viewer animation when video plays
        } else {
            video.pause();
            playPauseButton.innerHTML = "▶"; // Change to play icon
            playPauseButton.style.display = "block"; // Show button when paused
            modelViewer.play(); // Play model-viewer animation when video pauses
        }
    }

    // Ensure clicking the video itself also toggles play/pause
    video.addEventListener('click', toggleVideo);
    playPauseButton.addEventListener('click', toggleVideo);

    // Hide play button when video starts playing (e.g., after user click or successful autoplay)
    video.addEventListener('play', () => {
        playPauseButton.style.display = "none";
    });

    // Show play button when video pauses
    video.addEventListener('pause', () => {
        playPauseButton.style.display = "block";
    });

    // Function to launch AR experience
    function launchAR() {
        // Pause video when entering AR
        if (!video.paused) {
            video.pause();
        }

        // Hide video and play button immediately when AR is triggered
        video.style.display = 'none';
        playPauseButton.style.display = 'none';

        if (modelViewer.canActivateAR) {
            modelViewer.activateAR();
        } else {
            alert("AR is not available on this device.");
            // If AR is not available, but the AR button was clicked,
            // re-show the video and play button (video will be paused).
            video.style.display = 'block';
            playPauseButton.style.display = 'block';
        }
    }

    // Attach AR button listener
    arButton.addEventListener('click', launchAR);

    // IMPORTANT: Add listener for when model-viewer enters/exits AR
    modelViewer.addEventListener('ar-status', (event) => {
        if (event.detail.status === 'not-presenting') {
            // User exited AR. Re-display video and button.
            video.style.display = 'block';
            if (video.paused) {
                playPauseButton.style.display = 'block';
            }
        } else if (event.detail.status === 'ar' || event.detail.status === 'scene-viewer') {
            // User entered AR. Hide video and play button.
            video.style.display = 'none';
            playPauseButton.style.display = 'none';
        }
    });

});
</script>

  <div class="card"> 
      <h1 style="text-align: center;" markdown="1"><p style="font-family:Chalet LondonNineteenEighty Regular; font-weight: bold; color: #000099;"> The joy of sharing kindness with friends + neighbors = sugarlump.love</p></h1></b>
      <img class="marginauto" src="images/erin_video_scenes-34.png" alt="Logo" style="width: 300px; height: auto">
      <h2 style="text-align: center;" markdown="1"><p style="font-family:Chalet LondonNineteenEighty Regular; font-weight: bold; color: #ff69b4;"><b>about:</b><a href="https://sugarlump.love/about" target="_blank" rel="noopener noreferrer"><b style="color:#59cbe8;"> creativity + kindness</a></b></h2></p>
      <h2 style="text-align: center;" markdown="1"><p style="font-family:Chalet LondonNineteenEighty Regular; font-weight: bold; color: #ff69b4;"><b>rewards:</b><a href="https://sugarlump.love/" target="_blank" rel="noopener noreferrer"><b style="color:#59cbe8;"><b> the kindness project</b></b></h2></a></p></a></h2>
      <h2 style="text-align: center;" markdown="1"><p style="font-family:Chalet LondonNineteenEighty Regular; font-weight: bold; color: #ff69b4;"><b>join:</b><a href="https://sugarlump.love/the-club" target="_blank" rel="noopener noreferrer"><b style="color:#59cbe8;"> sugarlump kindness club</a></b></b></p></h2>
      <h2 style="text-align: center;" markdown="1"><p style="font-family:Chalet LondonNineteenEighty Regular; font-weight: bold; color: #ff69b4;"><b>shop:</b><a href="https://sugarlump.love/shop" target="_blank" rel="noopener noreferrer"><b style="color:#59cbe8;"> creative kindness kits</a></b></b></p></h2> 
      <h2 style="text-align: center;" markdown="1"><p style="font-family:Chalet LondonNineteenEighty Regular; font-weight: bold; color: #ff69b4;"><b>brag tags:</b><a href="https://www.schoollife.com/bragtags-intro" target="_blank" rel="noopener noreferrer"><b style="color:#59cbe8;"> accomplishment, recognition, confidence</a></b></b></p></h2>  
      <h2 style="text-align: center;" markdown="1"><p style="font-family:Chalet LondonNineteenEighty Regular; font-weight: bold; color: #ff69b4;"><b>sponsors:</b><a href="https://sugarlump.love/contact" target="_blank" rel="noopener noreferrer"><b style="color:#59cbe8;"><b> get involved</b></b></h2></a></p></a></h2> 
      <br>
    <h1 style="text-align: center;" markdown="1"><p style="font-family:DaisyByhapppyal-Regular; font-weight: bold; color: #000099;"><em> THIS KINDNESS PROJECT SPONSORED BY</em></p></h1></b>
    <img class="marginauto" src="images/erin_video_scenes-37.png" alt="Logo" style="width: 300px; height: auto">
  </div>
    
    <div class="centerImage">
  <button onclick="window.open('https://www.tercekrealestate.com/', '_blank')" type="button" id="SponsorButton" style="z-index: 9; background-color: #ffffff; border-radius: 8px; border: 2px solid #59cbe8; height: 35px; width: auto; color: #000099; font-family: 'Chalet LondonNineteenEighty Regular', sans-serif; font-size: 20px;">
    <strong>&nbsp; visit &nbsp;</strong>
  </button>
  </div>

    <div class="card">
    <h2 style="text-align: center;" markdown="1"><p style="font-family:Chalet LondonNineteenEighty Regular; font-weight: bold; color: #000099;">Experience 4D Augmented Reality On Your Phone</p></h2>
    <img alt="AR Instructions" src="images/erin_video_scenes-41.png" img class="marginauto" style="max-width: 100%; max-height: 350px">
    <h3 style="text-align: center;" markdown="1"><p style="font-family:Chalet LondonNineteenEighty Regular; font-weight: bold; color: #000099;"><em> If AR button does not appear on mobile device, use another browser.</em></p></h3></b>
    </div>
  
    <div class="card">
    <h4 style="text-align: center;" markdown="1"><a href="https://avertek.net/" target="_blank" rel="noopener noreferrer"><p style="font-family:Chalet LondonNineteenEighty Regular; color:##59cbe8;"> Contact AVERtek to learn more about AR marketing.</p></a></h4></b>
    </div>


</div>
</body>
</html>
